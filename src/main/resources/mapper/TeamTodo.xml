<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.teamplus.mvc.dao.TeamTodoMapper">
    <!-- 프로젝트 투두리스트 [시퀀스 추출] -->
    <select id="getSequence" resultType="int">
        select
            teamTodoNo_seq.nextval
        from
            dual
    </select>

    <!-- 프로젝트 투두리스트 [등록] -->
    <insert id="newTeamTodo">
        insert
        into
            TeamTodo(TodoNO,ProjectNo,UserNO,Title,Description,TodoDate,DueDate)
        values
            (#{todoNo},#{projectNo},#{userNO},#{title},#{description},#{todoDate},#{dueDate})

    </insert>

    <!-- 프로젝트 투두리스트 [내용 수정] -->
    <update id="update">
        update TeamTodo
        set
            Title=#{title},
            Description=#{description},
            TodoDate=#{todoDate},
            DueDate=#{dueDate}
        where
            TodoNo=#{todoNo}
    </update>

    <!-- 프로젝트 투두리스트 [진행상태 설정]
    ( 파라미터 타입 : Map<String,object> )
    예시)
    Map<String,Objec> map = new HashMap<>();
    map.put("status",1);
    map.put("todoNo","project1_user1_1");
    setStatus(map);
    -->
    <update id="setStatus">
        update TeamTodo
        set
            Status=#{status}
        where
            TodoNo=#{todoNO}
    </update>

    <!-- 프로젝트 투두리스트 [진행여부 : 완료 설정] -->
    <!-- 시작전 : 0(시작전) / 완료 : 1 / 진행중 : 2 / new : 3로 기준 -->
    <update id="setComplete">
        update TeamTodo
        set
            EndDate=sysdate,
            Status=1
        where
            TodoNO=#{todoNO}
    </update>

    <!-- T프로젝트 투두리스트 [삭제] -->
    <delete id="delete">
        delete
        from TeamTodo
        where TodoNo=#{todoNO}
    </delete>

    <!-- 프로젝트 투두리스트 [전체 조회] -->
    <select id="selectList" resultType="TeamTodoDTO">
        select * from TeamTodo
    </select>

    <!-- 프로젝트 투두리스트 [ProjectNo 와 UserNo별 조회]-->
    <select id="selectByUserNo" resultType="TeamTodoDTO">
        select *
        from TeamTodo
        where
            ProjectNo=#{projectNo} AND UserNo=#{userNO}
    </select>

    <!--프로젝트 투두리스트 [진행상태별 출력]-->

    <select id="selectByStatus" resultType="TeamTodoDTO">
        select *
        from TeamTodo
        where
            Status=#{status}
    </select>

    <!-- 프로젝트 투두리스트 [종료 예정일별 출력] : 필요시 추가 -->


</mapper>