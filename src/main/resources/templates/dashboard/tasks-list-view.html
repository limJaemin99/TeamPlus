<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{profile-layout}" lang="ko">

<th:block layout:fragment="pagetitle">
	<!--page title-->
	<div th:replace="partials/title-meta :: title-meta('Tasks List')"></div>
</th:block>

<head>
	<!-- Sweet Alert css-->
	<link href="/assets/libs/sweetalert2/sweetalert2.min.css" rel="stylesheet" type="text/css" />
	<!-- jQuery 로드 -->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>

<body>
	<div layout:fragment="content">
		<div th:replace="partials/page-title :: page-title('메모 리스트','메모')"></div>

		<div class="row">
			<div class="col-lg-12">
				<div class="card" id="tasksList">
					<div class="card-header border-0">
						<div class="d-flex align-items-center">
							<h5 class="card-title mb-0 flex-grow-1">메모 목록</h5>
							<div class="flex-shrink-0">
								<div class="d-flex flex-wrap gap-2">
									<button class="btn btn-danger add-btn" onclick="location.href='/private/taskwrite'"><i class="ri-add-line align-bottom me-1"></i> Create
										Task</button>
									<button class="btn btn-soft-danger" id="remove-actions"
										onClick="deleteMultiple()"><i class="ri-delete-bin-2-line"></i></button>
								</div>
							</div>
						</div>
					</div>
					<div class="card-body border border-dashed border-end-0 border-start-0">
						<form>
							<div class="row g-3">
								<div class="col-xxl-5 col-sm-12">
									<div class="search-box">
										<input type="text" class="form-control search bg-light border-light"
											placeholder="Search for tasks or something...">
										<i class="ri-search-line search-icon"></i>
									</div>
								</div>
								<!--end col-->

								<div class="col-xxl-3 col-sm-4">
									<input type="text" class="form-control bg-light border-light" id="demo-datepicker"
										data-provider="flatpickr" data-date-format="d M, Y" data-range-date="true"
										placeholder="Select date range">
								</div>
								<!--end col-->

								<div class="col-xxl-3 col-sm-4">
									<div class="input-light">
										<select class="form-control" data-choices data-choices-search-false
											name="choices-single-default" id="idStatus">
											<option value="">Status</option>
											<option value="all" selected>All</option>
											<option value="New">New</option>
											<option value="Pending">Pending</option>
											<option value="Inprogress">Inprogress</option>
											<option value="Completed">Completed</option>
										</select>
									</div>
								</div>
								<!--end col-->
								<div class="col-xxl-1 col-sm-4">
									<button type="button" class="btn btn-primary w-100" onclick="SearchData();"> <i
											class="ri-equalizer-fill me-1 align-bottom"></i>
										Filters
									</button>
								</div>
								<!--end col-->
							</div>
							<!--end row-->
						</form>
					</div>
					<!--end card-body-->
					<div class="card-body">
						<div class="table-responsive table-card mb-4">
							<table class="table align-middle table-nowrap mb-0" id="tasksTable">
								<thead class="table-light text-muted">
									<tr>
										<th class="sort" data-sort="id">NO</th>
										<th class="sort" data-sort="project_name">TITLE</th>
										<th class="sort" data-sort="content">CONTENT</th>
										<th class="sort" data-sort="noteDate">NoteDate</th>
										<th class="sort" data-sort="isPrivate">PRIVATE</th>
									</tr>
								</thead>
								<tbody class="list form-check-all" th:each="vo : ${list}">
									<tr>
										<td class="id" name="noteNo" id="noteNo" th:value="${vo.noteNo}">[[${vo.noteNo}]]</td>
										<td class="project_name"  name="title" th:text="${vo.title}">[[${vo.title}]]</td>
										<td class="id" name="content">
											<span class="password-hidden" th:utext="${vo.password}" id="password"></span>
										</td>
										<td class="client_name" name="notedate" style="width: 300px;" th:text="${vo.noteDate}">[[${vo.noteDate}]]</td>
										<td class="assignedto" style="text-align: center; width: 50px;" name="isPrivate">
											<div class="d-flex">
												<div name="isPrivate">[[${vo.isPrivate}]]</div>
												<div class="flex-shrink-0 ms-4">
													<ul class="list-inline tasks-list-menu mb-0">
														<li class="list-inline-item"><a
																th:href="|@{taskread(noteNo=${vo.noteNo})}|"><i
																class="ri-eye-fill align-bottom me-2 text-muted"></i></a>
														</li>
														<li class="list-inline-item"><a class="list-inline-item"
																						th:href="|@{taskmodify(noteNo=${vo.noteNo})}|"><i
																class="ri-pencil-fill align-bottom me-2 text-muted"></i></a>
														</li>
														<a class="remove-item-btn" data-bs-toggle="modal" href="#passwordModal">
															<i class="ri-delete-bin-fill align-bottom me-2 text-muted"></i>
														</a>
													</ul>
												</div>
											</div>
										</td>
									</tr>
								</tbody>
							</table>
						</div>
						<div class="d-flex justify-content-end mt-2">
							<div class="pagination-wrap hstack gap-2">
								<a class="page-item pagination-prev disabled" href="#">
									Previous
								</a>
								<ul class="pagination listjs-pagination mb-0"></ul>
								<a class="page-item pagination-next" href="#">
									Next
								</a>
							</div>
						</div>
					</div>
					<!--end card-body-->
				</div>
				<!--end card-->
			</div>
			<!--end col-->
		</div>
		<!--end row-->

		<div class="modal fade" id="passwordModal" tabindex="-1" aria-labelledby="exampleModalgridLabel" aria-modal="true">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalgridLabel">메모 패스워드 입력</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<form id="passwordForm" action="javascript:void(0);">
							<div class="row g-3">
								<div class="col-xxl-12">
									<div>
										<label for="passwordInput" class="form-label">Password</label>
										<input type="password" class="form-control" id="passwordInput" name="password">
									</div>
								</div><!--end col-->
								<div class="col-lg-12">
									<div class="hstack gap-2 justify-content-end">
										<button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
										<button type="submit" class="btn btn-primary">READ</button>
									</div>
								</div><!--end col-->
							</div><!--end row-->
						</form>
					</div>
				</div>
			</div>
		</div>
		<script th:inline="javascript">
			const passwordElements = document.getElementsByClassName("password-hidden");
			for (var i = 0; i < passwordElements.length; i++) {
				const passwordText = passwordElements[i].textContent;
				const asterisks = "*".repeat(passwordText.length);
				passwordElements[i].textContent = asterisks;
			};



		</script>

		<div class="modal fade flip" id="deleteOrder" tabindex="-1" aria-hidden="true">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-body p-5 text-center">
						<lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop"
							colors="primary:#405189,secondary:#f06548" style="width:90px;height:90px"></lord-icon>
						<div class="mt-4 text-center">
							<h4>삭제 하시겠습니까?</h4>
							<div class="hstack gap-2 justify-content-center remove">
								<button class="btn btn-link btn-ghost-success fw-medium text-decoration-none"
									id="deleteRecord-close" data-bs-dismiss="modal" type="button"><i
										class="ri-close-line me-1 align-middle"></i> Close</button>
								<button class="btn btn-danger" id="delete-record" type="submit">Yes, Delete It</button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!--end delete modal -->
	</div>


	<th:block layout:fragment="modal">

	</th:block>

	<th:block layout:fragment="pagejs">

		<!-- list.js min js -->
    <script src="/assets/libs/list.js/list.min.js"></script>

    <!--list pagination js-->
    <script src="/assets/libs/list.pagination.js/list.pagination.min.js"></script>

    <!-- titcket init js -->
    <script src="/assets/js/pages/tasks-list.init.js"></script>

    <!-- Sweet Alerts js -->
    <script src="/assets/libs/sweetalert2/sweetalert2.min.js"></script>
	</th:block>
</body>

</html>